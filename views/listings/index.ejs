<% layout("layouts/boilerplate") %>
<style>
  .tax-info{
    display: none;
  }
  .tax-toggle{
     border: 1px solid black;
     border-radius: 1rem;
     height: 3.5rem;
     padding: 1rem;
     display: flex;
     align-items: center;
  }
</style>
<body>
<% const categories = [
  { name: "Trending", icon: "fa-fire" },
  { name: "Rooms", icon: "fa-bed" },
  { name: "Iconic cities", icon: "fa-mountain-city" },
  { name: "Amazing pool", icon: "fa-person-swimming" },
  { name: "Farms", icon: "fa-tractor" },
  { name: "Gym", icon: "fa-dumbbell" },
  { name: "Beach", icon: "fa-umbrella-beach" },
  { name: "Mountains", icon: "fa-mountain-sun" },
  { name: "Camping", icon: "fa-campground" },
  { name: "Luxury", icon: "fa-hotel" },
  { name: "Winter", icon: "fa-snowflake" },
  { name: "Nature", icon: "fa-tree" },
  { name: "City", icon: "fa-city" },
  { name: "Historic", icon: "fa-landmark" },
  { name: "Countryside", icon: "fa-person-hiking" },
  { name: "Lake", icon: "fa-water" },
  { name: "Forest", icon: "fa-tree-city" },
  { name: "Houseboat", icon: "fa-ship" },
  { name: "Studio", icon: "fa-house" },
  { name: "Palace", icon: "fa-chess-rook" },
  { name: "Resort", icon: "fa-home" },
  { name: "Retreat", icon: "fa-seedling" },
  { name: "Hotel", icon: "fa-building" },
  { name: "Villa", icon: "fa-house-chimney" },
  { name: "Chalet", icon: "fa-house-tsunami" },
  { name: "Apartment", icon: "fa-building-user" }
]; %>
<div class="d-flex align-items-center justify-content-between flex-wrap gap-3">

  <div class="category-slider d-flex overflow-auto flex-nowrap gap-3" style="max-width: 100%;">
    <% categories.forEach(cat => { %>
      <a href="/listings?category=<%= cat.name %>" class="filter text-center px-2 <%= category === cat.name ? 'active-filter' : '' %>">
        <div><i class="fa-solid <%= cat.icon %>"></i></div>
        <p class="mb-0" style="font-size: 0.8rem;"><%= cat.name %></p>
      </a>
    <% }); %>
  </div>
  <div class="tax-toggle ms-auto">
    <div class="form-check form-check-reverse form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
      <label class="form-check-label" for="switchCheckDefault">Display total after Taxes</label>
    </div>
  </div>

</div>



<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-4">
    <%for(let listing of listings) { %>
     <a href="/listings/<%= listing._id %>"class="listing-link"> 
    <div class="card listing-card">
        <img src="<%= listing.image.url %>" 
          class="card-img-top" 
          alt="listing_image" style="height: 18rem;" />
          <div class="card-img-overlay">HOTELS</div>
        <div class="card-body">
           <p class="card-text">
             <b><%= listing.title %></b><br />
             &#8377; <%= listing.price.toLocaleString("en-IN") %>/ night
             <i class="tax-info">&nbsp; &nbsp;+18% GST</i>
           </p>
        </div>
    </div>
     </a>
    <% } %> 
</div>
</body>

<script>
  let taxSwitch = document.getElementById("switchCheckDefault");
  taxSwitch.addEventListener("click",()=>{
    let taxInfo = document.getElementsByClassName("tax-info");
    for(info of taxInfo){
     if(info.style.display != "inline"){
      info.style.display = "inline";
     } else {
      info.style.display = "none"
     }
    console.log(taxInfo);
    }
  });
</script>